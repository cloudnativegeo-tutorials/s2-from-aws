// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-dockerfile
{
	"name": "Guide: Access Sentinel 2 Data from AWS",
	"image": "mcr.microsoft.com/devcontainers/python:1-3.12-bookworm",

	// Make the container name and service name available to the container.
	"containerEnv": {
		"SERVICE_NAME": "guide-s2-aws-service",
		"CONTAINER_NAME": "Guide: Access Sentinel 2 Data from AWS"
	},
	
	"features": {
    "ghcr.io/rocker-org/devcontainer-features/quarto-cli:1": {}
  },

	// Install pixi, use it to install dependencies, and create a kernel for Jupyter.
	// "postCreateCommand": "/workspace/.devcontainer/postCreateCommand.sh",
	"postCreateCommand": "curl -fsSL https://pixi.sh/install.sh | bash && /home/vscode/.pixi/bin/pixi install && /home/vscode/.pixi/bin/pixi run python -m ipykernel install --user --name=$SERVICE_NAME --display-name '$CONTAINER_NAME'",

	// Open up the main notebook in the workspace.
	"postStartCommand": "code /workspace/index.ipynb",

	// Configure tool-specific properties.
  "customizations": {
    "vscode": {
      "extensions": [
				"ms-python.python",
				"ms-toolsai.jupyter",
				"quarto.quarto"
			]
    }
  }

	// Uncomment to connect as an existing user other than the container default. More info: https://aka.ms/dev-containers-non-root.
	// "remoteUser": "devcontainer"
}